{{- $block := .block -}}
{{- $layout := .block.data.layout | default "grid" }}
{{- with .block.data -}}
  <div class="block block-gallery{{ if $block.title }} block-with-title{{ end }} block-gallery--{{ $layout }}">
    <div class="container">
      <div class="block-content">
        {{ partial "blocks/top.html" (dict
          "title" $block.title
          "heading_level" $block.ranks.self
          "description" .description
        )}}

        {{- if eq $layout "carousel" -}}
          {{ partial "blocks/templates/gallery/carousel" . }}
        {{- else -}}
          {{ partial "blocks/templates/gallery/grid" . }}
        {{- end -}}

      </div>
    </div>
  </div>
{{- end -}}
