{{ define "main" }}
  {{ partial "pages/hero.html" . }}

  {{- $category := site.GetPage (printf "/categories%s" .Params.category) -}}
  {{- if .Params.blocks }}
    {{ $need_aside := false }}
    {{ range .Params.blocks }}
      {{ if .title }}
        {{ $need_aside = true }}
      {{ end }}
    {{ end }}

    <div class="content-blocks">
      {{ partial "toc/container.html"
          (dict
              "category" $category
              "toc" "pages/toc.html"
              "context" .
          )
      }}
      {{ partial "blocks/list.html" . }}
    </div>
  {{ else }}
    {{ partial "pages/image.html" .Params.image }}
    {{ partial "pages/children.html" .Params.children }}
  {{ end }}

{{ end }}
