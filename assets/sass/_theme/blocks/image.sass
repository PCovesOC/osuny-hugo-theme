.block-image
    img
        display: block
        height: auto
        max-width: 100%
    figcaption
        margin-top: $spacing0
        p
            margin-bottom: 0
            margin-top: 0
            + .credit
                margin-top: $spacing0
        .credit
            p
                @include meta
    picture
        display: block
        margin-left: half(-var(--grid-gutter))
        margin-right: half(-var(--grid-gutter))

    @include in-page-with-sidebar
        picture
            margin-left: 0
            margin-right: -var(--grid-gutter)
        img
            max-height: $block-image-max-height-with-sidebar
            width: auto

    @include in-page-without-sidebar
        figure
            img
                max-height: $block-image-max-height-without-sidebar
                // max-height: calc(100vh - var(--header-height))
                width: auto
                max-width: 100%
        &.image-portrait, &.image-square
            .block-content
                position: relative
                .top
                    position: absolute
                    width: columns(5)
            figure
                display: flex
                align-items: flex-end
                > a 
                    width: columns(7)
                    margin-left: half(var(--grid-gutter))
                    display: block
                    order: 2
                picture
                    margin-left: 0
                    margin-right: -var(--grid-gutter)
                figcaption
                    width: calc(#{columns(5)} + var(--grid-gutter) / 2)
                    order: 1
                    display: block
                    text-align: right
        &.image-landscape
            picture
                margin-left: -var(--grid-gutter)
                margin-right: -var(--grid-gutter)
                @media screen and (min-width: $grid-max-width)
                    margin-left: 0
                    margin-right: 0
            figcaption
                display: flex
                justify-content: space-between
                align-items: baseline
                p
                    max-width: columns(8)
                *
                    flex: 1 1
                .credit
                    margin-top: 0
                    text-align: right