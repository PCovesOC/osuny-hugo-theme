.block-pages
    .top
        h2, h3
            + .description
                margin-top: $spacing1
        a
            text-decoration: none
    .grid, .cards
        article
            display: flex
            flex-direction: column
            .media
                order: -1
                margin-bottom: $spacing1
                img
                    display: block
                    aspect-ratio: 16/9
                    object-fit: cover
        h1
            @extend .h3
            a
                text-decoration: none
            + .description
                margin-top: $spacing0

    @include media-breakpoint-up(md)
        .top
            margin-bottom: $spacing2

    @include media-breakpoint-down(md)
        .description
            @include h2
        article
            margin-top: $spacing1

    @include in-page-without-sidebar
        @include media-breakpoint-up(md)
            .top
                @include grid
                h2, h3
                    grid-column: 1 / 5
                    a
                        text-decoration: none
                        @include icon("arrow-right", "after", px2rem(16), true)
                            position: static
                .description
                    @include h2
                    grid-column: 5 / 13
                    margin-top: -0.25em
                    font-style: $h2-size-md

    &--grid
        .grid
            a
                @include icon("arrow-right", "after", px2rem(16), true)
                @include hover-translate-icon(after, 3)
        @include media-breakpoint-up(md)
            .grid
                @include grid(2, md)
            @include in-page-without-sidebar
                .grid
                    @include grid(3, md)

    &--cards
        background-color: $block-pages-card-background
        padding-bottom: $grid-gutter
        padding-top: $grid-gutter
        .cards
            @include grid(2, md)
        @include in-page-without-sidebar
            .cards
                @include grid(3, md)
        // TODO: move this //
        .block-gallery + &,
        .block-pages--cards + &
            margin-top: 0
        // ----------------- //
        .card
            padding: $spacing1
            background-color: $block-pages-card-page-background
            transition: background 0.3s, color 0.3s
            display: flex
            flex: auto
            flex-direction: column
            min-height: 320px
            &,
            a
                color: $block-pages-card-page-color
            .media
                margin-bottom: 0
                margin-left: -$spacing1
                margin-right: -$spacing1
                margin-top: -$spacing1
            .more
                @include icon("arrow-right", after, px2rem(16))
                    font-size: $small-size
                    opacity: 0
                    transform: translateX(-20px)
                    transition: 0.55s $arrow-ease-transition
                    position: absolute
                    right: 0
                @include link($block-pages-card-page-color)
                text-decoration-color: $block-pages-card-page-color
                text-decoration-line: underline
                text-decoration-thickness: 1px
                text-underline-offset: 3px
                position: relative
                margin-top: auto
                padding-top: $spacing1
                display: flex
                justify-content: space-between
                align-items: center
            &:hover
                .more:after
                    opacity: 1
                    transform: translateX(0)
            a,
            .more
                transition: text-decoration-color .3s ease, color .3s ease
            &:hover
                background-color: $block-pages-card-page-background-hover
                &, a, .more
                    color: $block-pages-card-page-color-hover
                .more
                    text-decoration-color: $block-pages-card-page-color-hover
    &--list
        ul
            @include list-reset
            li
                display: block
                line-height: 1
                + li
                    margin-top: $spacing0
                a
                    @extend .meta
                    text-decoration: none
                    @include icon("arrow-right", before, px2rem(10))
                        padding-right: $spacing0
        @include media-breakpoint-down(md)
            .top
                margin-bottom: $spacing0
            ul
                margin-top: $spacing1
        @include media-breakpoint-up(md)
            @include in-page-with-sidebar
                .block-content
                    .top
                        margin-bottom: $spacing1
                    .description
                        margin-bottom: $spacing1
                    ul
                        @include grid(2, md)
                        grid-row-gap: $spacing0 !important
                        li
                            margin-top: 0
            @include in-page-without-sidebar
                .block-content
                    @include grid
                    grid-row-gap: $spacing1
                    .top
                        display: block
                        grid-column: 1 / 8
                        margin-bottom: 0
                    .top + .description
                        grid-column: 1 / 8
                        grid-row: 2 / 3
                    // Default behavior (without page description)
                    ul
                        @include grid(4, md)
                        grid-column: 1 / 13
                        li
                            margin-top: 0
                    // If page description
                    .description + ul
                        grid-column: 7 / 13
                        grid-row: 2 / 3
                        display: block
                        li + li
                            margin-top: $spacing0

.block-pages-
    margin-top: $spacing4
    .pages
        @include grid(2, md)
    .main-page
        .title
            a
                @include icon("arrow-right", before)
                @include hover-translate-icon(before, 3)
                text-decoration-color: transparent
                display: block
                &::before
                    content: none
    .pages
        .page
            .title
                a
                    @include icon("arrow-right", before)
                    @include hover-translate-icon(before, 3)
                    text-decoration-color: transparent
    &--grid
        .main-page + .pages
            margin-top: $spacing2
        .pages
            .page
                .title
                    a
                        @extend .h3
                p
                    @extend .small
                    margin-top: half($spacing1)
        @include in-page-without-sidebar
            .pages
                @include grid(3, xl)

    &--list
        .block-content
            @include grid(2, lg)
            align-items: start

        .main-page
            .title
                @extend .h5
                @include media-breakpoint-up(lg)
                    margin-bottom: 0
            p
                @extend .h2
                @include media-breakpoint-up(lg)
                    margin-top: $spacing1

        .pages
            display: block
            margin-top: $spacing2
            @include media-breakpoint-up(lg)
                margin-top: calc(#{$spacing2})
            .page
                .title
                    margin-top: half($spacing1)
                    a
                        @extend .meta
                        @include hover-translate-icon(before, 3)
                        text-decoration-color: transparent
                        text-transform: none // FIXME Arnaud
                        &:hover
                            text-decoration-color: black
        .page
            > div
                padding: 0

    &--cards
        background-color: $block-pages-card-background
        padding-bottom: $grid-gutter
        padding-top: $grid-gutter
        .block-gallery + &,
        .block-pages--cards + &
            margin-top: 0
        .main-page
            a
                @include icon("arrow-right", after)
                @include hover-translate-icon(after, 3)
                @include stretched-link(before)
                &::after
                    font-size: px2rem(14)
                    position: relative
                    margin-left: $spacing0

        .main-page + .pages
            margin-top: $spacing2
        .pages
            @include grid(3, md)
            @include in-page-with-sidebar
                @include grid(2, md)
            .page
                aspect-ratio: 0.8
                background-color: $block-pages-card-page-background
                transition: background 0.3s, color 0.3s
                &,
                a
                    color: $block-pages-card-page-color
                .title + p
                    margin-top: $spacing0
                .media
                    margin-bottom: 0
                .more
                    @include icon("arrow-right", after)
                    @include link($block-pages-card-page-color)
                    // @extend .small
                    font-size: px2rem(16)
                    position: relative
                    text-decoration-color: $block-pages-card-page-color
                    text-decoration-line: underline
                    text-decoration-thickness: 1px
                    text-underline-offset: 3px
                    margin-top: auto
                    &::after
                        font-size: $small-size
                        opacity: 0
                        position: absolute
                        right: 0
                        transform: translateX(-20px)
                        transition: 0.55s $arrow-ease-transition
                &:hover
                    .more:after
                        opacity: 1
                        transform: translateX(0)
                a,
                .more
                    transition: text-decoration-color .3s ease, color .3s ease
                > div:first-child
                    display: flex
                    flex: auto
                    flex-direction: column
                .title
                    a
                        text-decoration: none
                    + p:not(.more)
                        margin-bottom: 1rem
                &:hover
                    background-color: $block-pages-card-page-background-hover
                    &,
                    a,
                    .more
                        color: $block-pages-card-page-color-hover
                    .more
                        text-decoration-color: $block-pages-card-page-color-hover
                > div:first-of-type
                    padding: $spacing1
        .page
            .title
                a::before
                    content: none
